// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Brand {
  id                Int      @id @default(autoincrement())
  name              String   @unique
  logoUrl           String
  cheapestMenuPrice Int
  maxDiscount       Int
  isPopular         Boolean  @default(false) // '인기 브랜드' 구분을 위함
  isLowCost         Boolean  @default(false) // '저가 브랜드' 구분을 위함
  menus             Menu[]
}

model Menu {
  id            Int      @id @default(autoincrement())
  name          String
  imageUrl      String
  officialPrice Int
  isPopular     Boolean  @default(false) // '인기 메뉴' 구분을 위함

  brand         Brand    @relation(fields: [brandId], references: [id])
  brandId       Int
  prices        AppPrice[]

  @@unique([brandId, name])
}

model AppPrice {
  id           Int     @id @default(autoincrement())
  appName      String  // 예: "배달의민족"
  appLogoUrl   String
  price        Int
  discountInfo String?

  menu         Menu    @relation(fields: [menuId], references: [id])
  menuId       Int
}